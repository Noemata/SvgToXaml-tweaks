<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:i="using:Avalonia.Xaml.Interactivity"
             xmlns:ia="using:Avalonia.Xaml.Interactions.Core"
             xmlns:rx="using:System.Reactive"
             xmlns:vm="using:SvgToXaml.ViewModels"
             mc:Ignorable="d" d:DesignWidth="1000" d:DesignHeight="480"
             x:Class="SvgToXaml.Views.MainView">
  <Design.DataContext>
    <vm:MainWindowViewModel />
  </Design.DataContext>
  <UserControl.Resources>
    <StreamGeometry x:Key="PreviewIcon">M13.4219 0L22 8.57813L22 10L12 10L12 0L13.4219 0ZM14 8L18.5781 8L14 3.42188L14 8ZM20 14L20 12L22 12L22 14L20 14ZM20 18L20 16L22 16L22 18L20 18ZM20 22L20 20L22 20L22 22L20 22ZM20 26L20 24L22 24L22 26L20 26ZM20 30L20 28L22 28L22 30L20 30ZM16 30L16 28L18 28L18 30L16 30ZM12 30L12 28L14 28L14 30L12 30ZM8 30L8 28L10 28L10 30L8 30ZM4 30L4 28L6 28L6 30L4 30ZM0 30L0 28L2 28L2 30L0 30ZM0 14L0 12L2 12L2 14L0 14ZM0 10L0 8L2 8L2 10L0 10ZM0 6L0 4L2 4L2 6L0 6ZM0 2L0 0L2 0L2 2L0 2ZM4 2L4 0L6 0L6 2L4 2ZM8 2L8 0L10 0L10 2L8 2ZM0 18L0 16L2 16L2 18L0 18ZM0 22L0 20L2 20L2 22L0 22ZM0 26L0 24L2 24L2 26L0 26Z</StreamGeometry>
    <StreamGeometry x:Key="DeleteIcon">M26 6L24 6L24 29Q24 29.625 23.7656 30.1719Q23.5313 30.7188 23.125 31.125Q22.7188 31.5313 22.1719 31.7656Q21.625 32 21 32L5 32Q4.375 32 3.82813 31.7656Q3.28125 31.5313 2.875 31.125Q2.46875 30.7188 2.23438 30.1719Q2 29.625 2 29L2 6L0 6L0 4L8 4L8 2Q8 1.57813 8.15625 1.21875Q8.3125 0.859377 8.58594 0.585938Q8.85937 0.312504 9.21875 0.15625Q9.57813 0 10 0L16 0Q16.4219 0 16.7813 0.15625Q17.1406 0.312502 17.4141 0.585938Q17.6875 0.859377 17.8438 1.21875Q18 1.57813 18 2L18 4L26 4L26 6ZM10 4L16 4L16 2L10 2L10 4ZM22 6L4 6L4 29Q4 29.4063 4.29688 29.7031Q4.59375 30 5 30L21 30Q21.4062 30 21.7031 29.7031Q22 29.4063 22 29L22 6ZM10 26L8 26L8 10L10 10L10 26ZM14 26L12 26L12 10L14 10L14 26ZM18 26L16 26L16 10L18 10L18 26Z</StreamGeometry>
    <StreamGeometry x:Key="AddIcon">M32 15L32 17L17 17L17 32L15 32L15 17L0 17L0 15L15 15L15 0L17 0L17 15L32 15Z</StreamGeometry>
    <StreamGeometry x:Key="CopyIcon">M28 12.5781L28 32L8 32L8 26L0 26L0 0L13.4219 0L19.4219 6L21.4219 6L28 12.5781ZM22 12L24.5781 12L22 9.42188L22 12ZM8 6L16.5781 6L12.5781 2L2 2L2 24L8 24L8 6ZM26 14L20 14L20 8L10 8L10 30L26 30L26 14Z</StreamGeometry>
    <StreamGeometry x:Key="SaveIcon">M26 0Q26.4219 3.8147e-06 26.7813 0.15625Q27.1406 0.312502 27.4141 0.585938Q27.6875 0.859377 27.8438 1.21875Q28 1.57813 28 2L28 28L3.57813 28L0 24.4063L0 2Q0 1.57813 0.15625 1.21875Q0.3125 0.859377 0.585938 0.585938Q0.859375 0.3125 1.21875 0.15625Q1.57813 3.8147e-06 2 0L26 0ZM6 12L22 12L22 2L6 2L6 12ZM18 20L8 20L8 26L10 26L10 22L12 22L12 26L18 26L18 20ZM26 2L24 2L24 14L4 14L4 2L2 2L2 23.5781L4.40625 26L6 26L6 18L20 18L20 26L26 26L26 2Z</StreamGeometry>
    <StreamGeometry x:Key="PasteIcon">M28 12L28 32L12 32L12 30L0 30L0 4L8 4Q8 3.1875 8.32031 2.45313Q8.64062 1.71875 9.17969 1.17969Q9.71875 0.640629 10.4453 0.320313Q11.1719 0 12 0Q12.8125 0 13.5469 0.320313Q14.2812 0.640627 14.8203 1.17969Q15.3594 1.71875 15.6797 2.45313Q16 3.1875 16 4L24 4L24 12L28 12ZM6 6L6 8L18 8L18 6L14 6Q14 5.75 14.0078 5.47656Q14.0156 5.20313 14.0156 4.92188Q14.0156 4.39063 13.9609 3.86719Q13.9062 3.34375 13.6953 2.92969Q13.4844 2.51563 13.0859 2.25781Q12.6875 2 12 2Q11.3125 2 10.9141 2.25781Q10.5156 2.51563 10.3047 2.92969Q10.0937 3.34375 10.0391 3.86719Q9.98437 4.39063 9.98438 4.92188Q9.98438 5.20313 9.99219 5.47656Q10 5.75 10 6L6 6ZM12 28L12 12L22 12L22 6L20 6L20 10L4 10L4 6L2 6L2 28L12 28ZM26 14L14 14L14 30L26 30L26 14Z</StreamGeometry>
    <StreamGeometry x:Key="ArrowIcon">M20.4063 7.70313L12.7031 15.4063L11.2969 14L16.5781 8.70313L0 8.70313L0 6.70313L16.5781 6.70313L11.2969 1.40625L12.7031 0L20.4063 7.70313Z</StreamGeometry>
    <StreamGeometry x:Key="SettingsIcon">M27.7656 15.3438Q27.7656 15.4844 27.7734 15.625Q27.7812 15.7656 27.7813 15.9063Q27.7813 16.0469 27.7734 16.1875Q27.7656 16.3281 27.7656 16.4688L31.8125 18.9844L29.3281 24.9688L24.6875 23.9063Q24.3125 24.3125 23.9063 24.6875L24.9688 29.3281L18.9844 31.8125L16.4688 27.7656Q16.3281 27.7656 16.1875 27.7734Q16.0469 27.7813 15.9063 27.7813Q15.7656 27.7813 15.625 27.7734Q15.4844 27.7656 15.3438 27.7656L12.8281 31.8125L6.84375 29.3281L7.90625 24.6875Q7.5 24.3125 7.125 23.9063L2.48438 24.9688L0 18.9844L4.04688 16.4688Q4.04688 16.3281 4.03906 16.1875Q4.03125 16.0469 4.03125 15.9063Q4.03125 15.7656 4.03906 15.625Q4.04687 15.4844 4.04688 15.3438L0 12.8281L2.48438 6.84375L7.125 7.90625Q7.5 7.5 7.90625 7.125L6.84375 2.48438L12.8281 0L15.3438 4.04688Q15.4844 4.04688 15.625 4.03906Q15.7656 4.03125 15.9063 4.03125Q16.0469 4.03125 16.1875 4.03906Q16.3281 4.04688 16.4688 4.04688L18.9844 0L24.9688 2.48438L23.9063 7.125Q24.3125 7.5 24.6875 7.90625L29.3281 6.84375L31.8125 12.8281L27.7656 15.3438ZM25.9375 17.375Q25.9687 17 26 16.6328Q26.0312 16.2656 26.0313 15.8906Q26.0313 15.5313 26 15.1563Q25.9687 14.7813 25.9375 14.4219L29.625 12.125L28.2813 8.875L24.0469 9.85938Q23.5625 9.26563 23.0547 8.76563Q22.5469 8.26563 21.9531 7.76563L22.9375 3.53125L19.6875 2.1875L17.375 5.875Q17.0156 5.84375 16.6406 5.8125Q16.2656 5.78125 15.9063 5.78125Q15.5313 5.78125 15.1641 5.8125Q14.7969 5.84375 14.4219 5.875L12.125 2.1875L8.875 3.53125L9.85938 7.76563Q9.26562 8.25 8.76563 8.75781Q8.26562 9.26563 7.76563 9.85938L3.53125 8.875L2.1875 12.125L5.875 14.4375Q5.84375 14.8125 5.8125 15.1797Q5.78125 15.5469 5.78125 15.9219Q5.78125 16.2813 5.8125 16.6563Q5.84375 17.0313 5.875 17.3906L2.1875 19.6875L3.53125 22.9375L7.76563 21.9531Q8.25 22.5469 8.75781 23.0469Q9.26562 23.5469 9.85938 24.0469L8.875 28.2813L12.125 29.625L14.4375 25.9375Q14.7969 25.9688 15.1719 26Q15.5469 26.0313 15.9063 26.0313Q16.2813 26.0313 16.6484 26Q17.0156 25.9688 17.3906 25.9375L19.6875 29.625L22.9375 28.2813L21.9531 24.0469Q22.5469 23.5625 23.0469 23.0547Q23.5469 22.5469 24.0469 21.9531L28.2813 22.9375L29.625 19.6875L25.9375 17.375ZM15.9063 10.0313Q17.125 10.0313 18.1953 10.4922Q19.2656 10.9531 20.0625 11.75Q20.8594 12.5469 21.3203 13.6172Q21.7813 14.6875 21.7813 15.9063Q21.7813 17.125 21.3203 18.1953Q20.8594 19.2656 20.0625 20.0625Q19.2656 20.8594 18.1953 21.3203Q17.125 21.7813 15.9063 21.7813Q14.6875 21.7813 13.6172 21.3203Q12.5469 20.8594 11.75 20.0625Q10.9531 19.2656 10.4922 18.1953Q10.0313 17.125 10.0313 15.9063Q10.0313 14.6875 10.4922 13.6172Q10.9531 12.5469 11.75 11.75Q12.5469 10.9531 13.6172 10.4922Q14.6875 10.0313 15.9063 10.0313ZM15.9063 20.0313Q16.7656 20.0313 17.5156 19.7109Q18.2656 19.3906 18.8281 18.8281Q19.3906 18.2656 19.7109 17.5156Q20.0313 16.7656 20.0313 15.9063Q20.0313 15.0469 19.7109 14.2969Q19.3906 13.5469 18.8281 12.9844Q18.2656 12.4219 17.5156 12.1016Q16.7656 11.7813 15.9063 11.7813Q15.0469 11.7813 14.2969 12.1016Q13.5469 12.4219 12.9844 12.9844Q12.4219 13.5469 12.1016 14.2969Q11.7813 15.0469 11.7813 15.9063Q11.7813 16.7656 12.1016 17.5156Q12.4219 18.2656 12.9844 18.8281Q13.5469 19.3906 14.2969 19.7109Q15.0469 20.0313 15.9063 20.0313Z</StreamGeometry>
  </UserControl.Resources>
  <Grid ColumnDefinitions="300,8,*">
    <!-- Left Pane -->
    <Panel Grid.Column="0">
      <!-- AcrylicBlur -->
      <ExperimentalAcrylicBorder DockPanel.Dock="Left" IsHitTestVisible="False">
        <ExperimentalAcrylicBorder.Material>
          <ExperimentalAcrylicMaterial BackgroundSource="Digger"
                                       TintColor="LightGray"
                                       TintOpacity="1"
                                       FallbackColor="LightGray"
                                       MaterialOpacity="0.6" />
        </ExperimentalAcrylicBorder.Material>
      </ExperimentalAcrylicBorder>
      <DockPanel>
        <Panel Margin="12,36,12,12"
               Height="34"
               Background="Transparent"
               DockPanel.Dock="Top">
          <Label Content="SVG to XAML"
                 Margin="0"
                 Padding="6,0,6,0"
                 VerticalAlignment="Center"
                 FontWeight="Light"
                 FontSize="24"/>
        </Panel>
        <Separator DockPanel.Dock="Top" 
                   Margin="12,0,12,0"
                   Background="{DynamicResource SystemBaseHighColor}" 
                   Opacity="0.3" 
                   Height="0.55"/>
        <!-- Items List Actions -->
        <DockPanel DockPanel.Dock="Bottom"
                   LastChildFill="False"
                   Background="Transparent"
                   Margin="12,0,12,0"
                   HorizontalAlignment="Stretch">
          <Button Command="{Binding ClearCommand}"
                  HorizontalContentAlignment="Center"
                  HorizontalAlignment="Left"
                  Background="Transparent"
                  DockPanel.Dock="Left"
                  ToolTip.Tip="Clear"
                  Padding="12,8,12,8"
                  Margin="0,6,0,12">
            <Button.Content>
              <PathIcon Width="16" Height="16" 
                        Data="{DynamicResource DeleteIcon}"/>
            </Button.Content>
          </Button>
          <Button Command="{Binding AddCommand}"
                  HorizontalContentAlignment="Center"
                  HorizontalAlignment="Left"
                  Background="Transparent"
                  DockPanel.Dock="Right"
                  ToolTip.Tip="Add"
                  Padding="12,8,12,8"
                  Margin="0,6,0,12">
            <Button.Content>
              <PathIcon Width="16" Height="16" 
                        Data="{DynamicResource AddIcon}"/>
            </Button.Content>
          </Button>
        </DockPanel>
        <!-- Separator -->
        <Separator DockPanel.Dock="Bottom" 
                   Margin="12,0,12,0"
                   Background="{DynamicResource SystemBaseHighColor}" 
                   Opacity="0.3" 
                   Height="0.55"/>
        <!-- Items List -->
        <ListBox Items="{Binding Items}"
                 SelectedItem="{Binding SelectedItem, Mode=TwoWay}"
                 Background="Transparent"
                 Margin="12,12,12,12">
          <ListBox.Styles>
            <Style Selector="ListBoxItem">
              <Setter Property="HorizontalContentAlignment" Value="Stretch" />
              <Setter Property="Margin" Value="0" />
              <Setter Property="Padding" Value="0" />
            </Style>
          </ListBox.Styles>
          <ListBox.ItemTemplate>
            <DataTemplate>
              <Panel Background="Transparent"
                     VerticalAlignment="Stretch"
                     HorizontalAlignment="Stretch"
                     ToolTip.Tip="{Binding Path}"
                     Focusable="True">
                <i:Interaction.Behaviors>
                  <ia:EventTriggerBehavior EventName="DoubleTapped">
                    <ia:InvokeCommandAction Command="{Binding PreviewCommand}" CommandParameter="{x:Static rx:Unit.Default}"/>
                  </ia:EventTriggerBehavior>
                </i:Interaction.Behaviors>
                <Panel.KeyBindings>
                  <KeyBinding Gesture="Delete" Command="{Binding RemoveCommand}" />
                </Panel.KeyBindings>
                <Panel.ContextFlyout>
                  <MenuFlyout Placement="Bottom">
                    <MenuItem Command="{Binding PreviewCommand}">
                      <MenuItem.Header>
                        <StackPanel Orientation="Horizontal">
                          <PathIcon Width="16" Height="16" 
                                    Data="{DynamicResource PreviewIcon}"/>
                          <TextBlock Margin="12,0,0,0" Text="Preview"/>
                        </StackPanel>
                      </MenuItem.Header>
                    </MenuItem>
                    <MenuItem Command="{Binding RemoveCommand}">
                      <MenuItem.Header>
                        <StackPanel Orientation="Horizontal">
                          <PathIcon Width="16" Height="16" 
                                    Data="{DynamicResource DeleteIcon}"/>
                          <TextBlock Margin="12,0,0,0" Text="Remove"/>
                        </StackPanel>
                      </MenuItem.Header>
                    </MenuItem>
                  </MenuFlyout>
                </Panel.ContextFlyout>
                <TextBlock Text="{Binding Name}"
                           Padding="12"
                           IsHitTestVisible="False" />
              </Panel>
            </DataTemplate>
          </ListBox.ItemTemplate>
        </ListBox>
      </DockPanel>
    </Panel>
    <!-- Pane Splitter -->
    <GridSplitter Grid.Column="1"
                  Margin="0,0,0,0"
                  Background="White" />
    <!-- Right Pane -->
    <DockPanel Grid.Column="2"
               ClipToBounds="False">
      <Panel Background="White" 
             IsHitTestVisible="False"
             Height="36"
             DockPanel.Dock="Top"/>
      <Panel Background="White"
             ClipToBounds="False">
        <DockPanel Margin="6,0,6,6"
                   VerticalAlignment="Stretch"
                   HorizontalAlignment="Stretch"
                   ClipToBounds="False">
          <!-- Main Action Buttons -->
          <DockPanel
                HorizontalAlignment="Right" 
                Background="Transparent"
                LastChildFill="False"
                DockPanel.Dock="Top" 
                Margin="-36,0,0,12">
            <!-- Export All -->
            <Button Command="{Binding ExportAllCommand}"
                    CommandParameter="XAML"
                    Padding="6,6,6,7"
                    Margin="0,0,12,0"
                    ToolTip.Tip="Export All">
              <StackPanel Orientation="Horizontal">
                <PathIcon Width="16" Height="16" 
                          Margin="6,0,0,0"
                          Data="{DynamicResource SaveIcon}"/>
                <TextBlock Margin="0" Padding="12,0,12,0" Text="All"/>
              </StackPanel>
            </Button>
            <!-- Export Selected -->
            <Button Command="{Binding ExportSelectedCommand}"
                    CommandParameter="XAML"
                    Padding="6,6,6,7"
                    Margin="0,0,12,0"
                    ToolTip.Tip="Export Selected">
              <StackPanel Orientation="Horizontal">
                <PathIcon Width="16" Height="16" 
                          Margin="6,0,0,0"
                          Data="{DynamicResource SaveIcon}"/>
                <TextBlock Margin="0" Padding="12,0,12,0" Text="Selected"/>
              </StackPanel>
            </Button>
            <!-- Paste Svg -->
            <Button Command="{Binding ClipboardCommand}"
                    CommandParameter="XAML"
                    Padding="6,6,6,7"
                    Margin="0,0,12,0"
                    ToolTip.Tip="Paste Svg from Clipboard and Copy as Xaml">
              <StackPanel Orientation="Horizontal">
                <PathIcon Width="16" Height="16" 
                          Margin="6,0,0,0"
                          Data="{DynamicResource PasteIcon}"/>
                <PathIcon Width="16" Height="16" 
                          Margin="6,0,6,0"
                          Data="{DynamicResource ArrowIcon}"/>
                <PathIcon Width="16" Height="16" 
                          Margin="0,0,6,0"
                          Data="{DynamicResource CopyIcon}"/>
              </StackPanel>
            </Button>
            <!-- Copy All -->
            <Button Command="{Binding CopyAllCommand}"
                    CommandParameter="XAML"
                    Padding="6,6,6,7"
                    Margin="0,0,12,0"
                    ToolTip.Tip="Copy All">
              <StackPanel Orientation="Horizontal">
                <PathIcon Width="16" Height="16" 
                          Margin="6,0,0,0"
                          Data="{DynamicResource CopyIcon}"/>
                <TextBlock Margin="0" Padding="12,0,12,0" Text="All"/>
              </StackPanel>
            </Button>
            <!-- Copy Selected -->
            <Button Command="{Binding CopySelectedCommand}"
                    CommandParameter="XAML"
                    Padding="6,6,6,7"
                    Margin="0,0,12,0"
                    ToolTip.Tip="Copy Selected">
              <StackPanel Orientation="Horizontal">
                <PathIcon Width="16" Height="16" 
                          Margin="6,0,0,0"
                          Data="{DynamicResource CopyIcon}"/>
                <TextBlock Margin="0" Padding="12,0,12,0" Text="Selected"/>
              </StackPanel>
            </Button>
            <!-- Settings -->
            <Button Margin="0,0,6,0" 
                    Padding="6,7,6,7"
                    ToolTip.Tip="Settings">
              <Button.Flyout>
                <Flyout ShowMode="TransientWithDismissOnPointerMoveAway" 
                        Placement="BottomEdgeAlignedRight">
                  <StackPanel Spacing="12">
                    <CheckBox IsChecked="{Binding EnableGenerateImage}"
                              Content="Generate Image Control"
                              HorizontalAlignment="Stretch"
                              HorizontalContentAlignment="Stretch"
                              Margin="0"
                              Padding="6"/>
                    <CheckBox IsChecked="{Binding EnableGeneratePreview}"
                              Content="Generate Preview Resources"
                              HorizontalAlignment="Stretch"
                              HorizontalContentAlignment="Stretch"
                              Margin="0"
                              Padding="6"/>
                    <Separator Background="{DynamicResource SystemBaseHighColor}" Opacity="0.3" Height="0.55"/>
                    <CheckBox IsChecked="{Binding UseResources}"
                              Content="Use Resources"
                              HorizontalAlignment="Stretch"
                              HorizontalContentAlignment="Stretch"
                              Margin="0"
                              Padding="6"/>
                    <CheckBox IsChecked="{Binding UseCompatMode}"
                              Content="Use Compat Mode"
                              HorizontalAlignment="Stretch"
                              HorizontalContentAlignment="Stretch"
                              Margin="0"
                              Padding="6"/>
                    <CheckBox IsChecked="{Binding UseBrushTransform}"
                              Content="Use Brush Transform"
                              HorizontalAlignment="Stretch"
                              HorizontalContentAlignment="Stretch"
                              Margin="0"
                              Padding="6"/>
                  </StackPanel>
                </Flyout>
              </Button.Flyout>
              <PathIcon Width="16" Height="16" 
                        Margin="6,0,6,0"
                        Data="{DynamicResource SettingsIcon}"/>
            </Button>
          </DockPanel>
          <!-- Picture Contents -->
          <Panel Background="Transparent" Margin="0,0,6,6">
            <Panel.ContextFlyout>
              <MenuFlyout Placement="Bottom">
                <MenuItem Header="Copy Selected"
                          Command="{Binding CopySelectedCommand}"
                          CommandParameter="XAML" />
                <MenuItem Header="Copy All"
                          Command="{Binding CopyAllCommand}"
                          CommandParameter="XAML" />
                <MenuItem Header="Export Selected"
                          Command="{Binding ExportSelectedCommand}"
                          CommandParameter="XAML" />
                <MenuItem Header="Export All"
                          Command="{Binding ExportAllCommand}"
                          CommandParameter="XAML" />
              </MenuFlyout>
            </Panel.ContextFlyout>
            <Viewbox>
              <SKPictureControl Picture="{Binding SelectedItem.Picture, FallbackValue={x:Null}}" />
            </Viewbox>
          </Panel>
        </DockPanel>
      </Panel>
    </DockPanel>
  </Grid>
</UserControl>
